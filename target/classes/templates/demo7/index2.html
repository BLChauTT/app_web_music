<html xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Index</title>

	<script th:src="@{/assets/js/jquery-3.7.1.min.js}"></script>

	<script>

		$(document).ready(function () {

			$('#country').change(function () {
				var countryId = $(this).val();
				if (countryId == -1) {
					$('#city').html('');
				} else {
					$.ajax({
						type: 'GET',
						url: '/ajax/findCitiesByCountry',
						data: {
							countryId: countryId
						},
						success: function (cities) {
							var s = '';
							for(var i = 0; i < cities.length; i++) {
								s += '<option value="' + cities[i].id + '">' + cities[i].name + '</option>';
							}
							$('#city').html(s);
						}
					});
				}
			});

		});

	</script>

</head>

<body>

	Country <select id="country">
		<option value="-1">Select Country</option>
		<option th:each="country : ${countries}" th:value="${country.id}" th:text="${country.name}"></option>
	</select>
	<br><br>
	City <select id="city">

	</select>


</body>

</html>